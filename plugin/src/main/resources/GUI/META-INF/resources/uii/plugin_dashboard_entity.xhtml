<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui"
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    template="template.html">

    <composite:interface>



    </composite:interface>
    <ui:define name="navigation">
        <h:form>
            <a
                aria-label="intranda Logo"
                href="index.xhtml"
                id="brand">&#160; </a>

            <ui:include src="/uii/template/inc_menu_preferences.xhtml" />
            <ui:include src="/uii/template/inc_menu_main.xhtml" />
        </h:form>
    </ui:define>

    <ui:define name="content">
        <style>

</style>


        <h:panelGroup id="entity">

            <div class="grid">
                <div class="head">
                    <h1>
                        <h:outputText value="#{msgs[DashboardForm.plugin.title]}" />
                    </h1>

                </div>

                <div class="left">

                    <h:form>
                        <ui:repeat
                            var="type"
                            value="#{DashboardForm.plugin.allEntityTypes}">


                            <div class="col-sm-6">
                                <div
                                    class="box  box-bordered"
                                    style="color: #{type.color}">
                                    <div
                                        class="box-title"
                                        jsf:style="border-color: #{type.color};  ">
                                        <h3>
                                            <i
                                                class="fa #{type.icon} big-icon"
                                                style="color: #{type.color};" />
                                            <h:outputText
                                                value="#{type.name}"
                                                style="color: #{type.color};" />
                                        </h3>


                                        <button
                                            class="btn nobackground pull-right"
                                            jsf:id="addEntity"
                                            style="color:  #{type.color}; margin-right: 5px;"
                                            jsf:action="#{DashboardForm.plugin.createNewEntity(type)}">
                                            <i class="fa fa-plus big-icon" />
                                        </button>

                                        <button
                                            class="btn nobackground pull-right"
                                            jsf:id="searchEntities"
                                            style="color:  #{type.color}; margin-right: 5px;"
                                            jsf:onclick="$('#entitySearchBox').modal('show');">
                                            <i class="fa fa-search big-icon" />
                                            <f:ajax
                                                execute="searchField"
                                                render=":entity" />
                                        </button>

                                        <h:inputText
                                            value="#{type.searchValue}"
                                            id="searchField"
                                            styleClass="searchField pull-right" />
                                    </div>
                                    <h:panelGroup
                                        layout="block"
                                        styleClass="box-content nopadding #{type.name}"
                                        style="border-color: #{type.color}; #{type.showLinkedContent ? '' : 'display:none'}"
                                        id="sources">

                                        <h:panelGroup
                                            styleClass="relation-row header"
                                            rendered="#{type.showLinkedContent}">
                                            <div style="margin-left: 10px;">#{msgs.plugin_workflow_entity_sourceName}</div>
                                            <div>#{msgs.plugin_workflow_entity_sourceChangeDate}</div>
                                            <div>#{msgs.plugin_workflow_entity_sourceStatus}</div>
                                            <div>#{msgs.plugin_workflow_entity_sourceAction}</div>
                                        </h:panelGroup>
                                        <h:panelGroup
                                            layout="block"
                                            styleClass="sources"
                                            rendered="#{type.showLinkedContent}">

                                            <ui:repeat
                                                var="entity"
                                                value="#{DashboardForm.plugin.getEntityData(type)}">
                                                <h:panelGroup
                                                    styleClass="relation-row"
                                                    id="entity">
                                                    <div style="margin-left: 10px;">
                                                        <h:outputText
                                                            value="#{entity.displayName}"
                                                            style="color: #333" />
                                                    </div>
                                                    <div>
                                                        <h:outputText
                                                            value="#{entity.lastModified}"
                                                            style="color: #333" />
                                                    </div>
                                                    <div>
                                                        <h:outputText
                                                            value="#{entity.status}"
                                                            styleClass="badge-bordered"
                                                            style="color: #333" />
                                                    </div>
                                                    <div>
                                                        <button
                                                            class="btn btn-mini"
                                                            jsf:id="editentity"
                                                            style="background-color: #{type.color}; color: #fff; margin-left: 5px;"
                                                            jsf:action="#{DashboardForm.plugin.loadEntityEdition(entity)}">
                                                            <i class="fa fa-pencil" />
                                                        </button>
                                                    </div>
                                                </h:panelGroup>
                                            </ui:repeat>
                                        </h:panelGroup>
                                    </h:panelGroup>
                                </div>
                            </div>






                        </ui:repeat>

                    </h:form>

                </div>
                <div
                    class="right"
                    style="text-align: center;">still without content</div>

            </div>



        </h:panelGroup>

    </ui:define>
</ui:composition>